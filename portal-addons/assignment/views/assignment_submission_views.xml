<?xml version="1.0"?>
<odoo>
    <record id="assignment_submission_view_form" model="ir.ui.view">
        <field name="name">assignment_submission.form</field>
        <field name="model">assignment_submission</field>
        <field name="arch" type="xml">
            <form string="Assignment Submission">
                <sheet>
                    <header class="d-flex align-items-center justify-content-start px-0 py-2">
                        <button name="submit_grade" attrs="{'invisible':[('has_graded_all_criteria','=',True),('result','=','not_graded')]}" string="Submit" confirm="Are you sure? You can not re-grade this submission after clicking OK." type="object" class="oe_highlight disabled"/>
                        <button name="submit_grade" attrs="{'invisible':['|',('has_graded_all_criteria','=',False),('result','!=','not_graded')]}" string="Submit" confirm="Are you sure? You can not re-grade this submission after clicking OK." type="object" class="oe_highlight"/>
                    </header>

                    <h3 class="mt-2 mb-2">Genaral Information</h3>
                    <group>
                        <field name="has_graded_all_criteria" invisible="1"/>
                        <group>
                            <field name="student" string="Student" class="border bg-light" write="false"/>
                            <field name="course" string="Course" class="border bg-light" write="false"/>
                            <field name="assignment" string="Assignment" class="border bg-light" write="false"/>
                        </group>
                        <group>
                            <field name="result" string="Result" class="border bg-light" write="false"/>
                            <field name="submission_url" string="Submission URL" class="border bg-light" write="false"/>
                        </group>


                        <!-- để nguyên -->
                        <!-- <label for="criteria_responses" string="Criterion Response" class="mt-2" >Criterion Grading</label> -->
                        <h3 class="mt-2 mb-2">Criterion Grading</h3>
                        <field attrs="{'readonly':[('result','!=','not_graded')]}" name="criteria_responses" string="Criterion Grading" class="border bg-light">
                            <tree string="Criterion Response" create="false" delete="false">
                                <field name="number"/>
                                <field name="submission"/>
                                <field name="criterion"/>
                                <field name="feed_back"/>
                                <field name="result"/>
                            </tree>
                        </field>
                    </group>
                </sheet>

                    <!-- trace log -->
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="assignment_submission_view_tree" model="ir.ui.view">
        <field name="name">assignment_submission.tree</field>
        <field name="model">assignment_submission</field>
        <field name="arch" type="xml">
            <tree limit="20" string="Assignment Submission Group" edit="false" class="text-center">
                <field name="course" />
                <field name="assignment" />
                <field name="student" />
                <field name="submission_url" widget="url" />
                <field name="result" />
            </tree>
        </field>
    </record>

    <record id="assignment_submission_action" model="ir.actions.act_window">
        <field name="name">Assignment Submission</field>
        <field name="res_model">assignment_submission</field>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>
